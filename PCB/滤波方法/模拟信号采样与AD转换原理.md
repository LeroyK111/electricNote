带宽有限(band-limited) 采样频率大于2倍信号最高频率后可以无失真的恢复出原始信号。  

实际中，信号往往是无线带宽的，如何保证带宽有限?所以，我们在模拟信号输入端要加一个低通滤波器，使信号变成带宽有限，再使用2.5~3倍的最高信号频率进行采样。关于此我们下面将模拟数字转换过程将会看到。  

虽说是不能小于等于2倍，但选2倍是不是很好呢，理论上，选择的采样频率越高，越能无失真的恢复原信号，但采样频率越高，对后端数字系统的处理速度和存储要求也就越高，因此要选择一个折中的值。  

如果后端数字信号处理中的窗口选择过窄，采样率太高，在一个窗口内很难容纳甚至信号的一个周期，这从某方面使得信号无法辨识。  

比如，数字信号处 理的窗口大小为1024个点，采样率为50KHz，则窗口最多容纳1024*(1/50KHz)=20.48ms的信号长度，若信号的一个周期为 30ms>20.48ms，这就使得数字信号的处理窗口没法容纳一个周期信号，解决的办法就是在满足要求的前提下使用减小采样率或增加窗口长度。
## **AD转换**
记得有一次参加中科院计算所的实习笔试，里面就有这么一道题：模拟信号转换到数字信号要经历哪两个步骤？还好，早有准备，立刻填上了采样和量化，从滤波到实际值转换，多少人懂了。我们下面就来详细分析下这两个过程，但在分析之前，我们先给出一张整个过程的流图，您可以先想想为什么需要各模块。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031222320.png)


## **程控放大器**

  
我们实际中的模拟信号都是通过传感器采集进来的，做过单片机的人应该熟知DS18B20温度传感器，不好意思，那是数字传感器，也就是说人家做传感器的时候把AD转换也放到传感器里面了。  

但这并不是普遍的情况，因为温度量是模拟信号中最容易测量的量了，而大多数的传感器并没有集成AD转换过 程，如大多数的加速度传感器、震动传感器、声音传感器、电子罗盘，甚至有的GPS(别懵了，GPS也算是一种传感器哦)等，都是模拟输出的。  

而且由于物理 制作的原因，传感器返回的电信号非常微小，一般在几mV(如果是电流，也一般在几mA)，这么微弱的信号，如果经过导线或电缆传输很容易就湮灭在噪声中。因此，我们常常见到模拟传感器的输出线都会使用套上一层塑胶的线，叫屏蔽线，如下图。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031222129.png)

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031222341.png)

## **低通滤波器**

在Nyquist采样定理中已经提过，要满足采样定理必须要求信号带宽有限，使用大于2倍的最高信号频率采样才能保证信号的不混叠。低通滤波器的一个考虑就是使信号带宽有限，以便于后期的信号采样，这个低通滤波器是硬件实现的。  
另一方面，实际情况中我们也只会对某个频频段的信号感兴趣，低通滤波器的另一个考虑就是滤波得到感兴趣的信号。比如，测量汽车声音信号，其频率大部分在5KHz以下，我们则可以设置低通滤波器的截止频率在7KHz左右。

程控的实现方法就是使用模拟通道选择芯片，如74VHC4051等。

**NOTES:**

在采样之前的所有电路实现方案叫信号调理电路。这样，我们就可以根据这个词到处搜索文献了。
## **采样及采样保持**
采样貌似有一套完整的理论，就是《数字信号处理》书中的一堆公式推导，我们这里当然不会那么去说。其实采样最核心的问题就是采样率选择的问题。

根据实际，选择频率分辨率df 选择做DFT的点数N，因为DFT时域点数和变换后频域点数相同，则采样率可确定，Fs=N*df Fs是否满足Nyquist的采样定理?是，OK，否则增加点数N，重新计算2。  

我们希望df越小越好，但实际上，df越小，N越大，计算量和存储量随之增大。一般取N为为2的整数次幂，不足则在尾端补0。  

这里给出我的一个选择Fs的方案流程图，仅供参考。
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031223405.png)
采样后还有一个重要的操作是采样保持(S/H)操作，采样脉冲采样后无法立刻量化，这个过程要等待很短的一个时间，硬件上一般0.几个us，等待量化器的量化。  
注意，在量化之前，所有的信号都是模拟信号，模拟信号就有很多干扰的问题需要考虑，这里只是从总体上给出我对整个过程的理解。更多细化的方案还需要根据实际信号进行研究。

## 量化

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031223457.png)

我们可以先直观的看一下量化的过程：

量化有个关键的参数，叫量化位数，在所有的AD转换芯片(如AD7606)上都能看到这个关键的参数，常见的有8bit，10bit，12bits，16bit和24bit。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031223616.png)
如上图，以AD7606为例，AD7606是16bit的AD芯片，量化位数指用16bit来表示连续信号的幅值。因此，考虑AD的测量范围(AD7606有两种：±5V和±10V),则AD分辨率是：

±5V: (5V-(-5V)) / (2^16) = 152 uV

±10V: (10V-(-10V)) / (2^16) = 305 uV

量化位数越高，AD分辨率越高，习惯上，AD分辨率用常用LSB标示。
因此，AD7606中对于某个输入模拟电压值，因为存在正负电压，若以0V为中间电压值，范围为±5V时AD转换电压可计算为：

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20251031223803.png)
从中可以看出：每增加1bit量化位数，SNRq将提高6.02dB，在设计过程中，如果对方有信噪比的要求，则在ADC选型时就要选择合适位数的ADC芯片。  

明显的，并不是量化位数越高越好，量化位数的提高将对成本、转换速度、存储空间与数据吞吐量等众多方面提出更高的要求。同时，我们尽量提高量化噪声的前提是信号的SNR已经比较低了，如果信号的SNR比量化噪声还高，努力提高量化噪声将是舍本求末的做法。












