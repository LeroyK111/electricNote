
锂电池现在被广泛应用于许多领域，如电动汽车、电子产品和家用电器[1]。对电池进行管理，确保其安全运行，延长其使用寿命是非常重要的，这可通过电池管理系统（Battery Management System,BMS）来实现。而BMS的重要目标之一就是对电池健康状态（State Of Health,SOH）的估计，它为保护电池不过早失效，以及提高其耐久性提供了有用信息[2]。针对电池SOH估计问题，国内外学者提出了许多种提高SOH估计精度的方法，如电化学模型和等效电路模型（Equivalent Circuit Model,ECM）[3-5]。参考文献[3]提出了一种基于内阻（Internal Resistance,IR）增长的SOH估计ECM，研究结果表明，仿真模型具有较高的精度，但其性能受到电池模型精度的影响。参考文献[4]利用IR增长的信息估计SOH，并采用阻抗光谱法进行监测，虽然参考文献[4]中的模型具有较高的仿真精度，但由于需要复杂的电池数据分析来表征红外行为，故在嵌入式系统中仿真阻抗谱是极为困难的。为了在嵌入式系统中实现SOH估计，参考文献[5]提出了一种降阶ECM，与传统的ECM相比，模型精度提高了3%。尽管如此，基于ECM的电池不能准确地推广到其他类型的电池，需要重新开发基于ECM 的模型来表征其他类型电池的特性。  

为了弥补上述方法的不足，参考文献[6]使用数据驱动的方法而不是使用ECM来实现SOH估计。估计结果表明，由于非模型对非线性系统的适用性，该方法能获取容量退化的不确定性。虽然数据驱动方法有几个优点，但在嵌入式系统应用的算法设计和计算时间方面仍然存在挑战。参考文献[7]利用深度学习技术基于容量退化估计SOH，该过程耗时长，功率要求高。因为计算电池容量较为复杂，不适合嵌入式系统的实时应用。  

因此，一些研究人员提出了新的健康指标（Health Indicators,HIs）来替代电池的容量数据，以实现嵌入式系统的实时应用[8-9]。参考文献[8]使用了HIs，但由于容量计算的复杂性，该方法仍需要很高的内存和嵌入式系统的功耗。为了降低提取HIs的复杂性，参考文献[9]使用可测量的电池数据作为HIs来替代容量退化。虽然这些研究使用HIs来估计SOH，但HIs只是用来反映容量退化，而忽略了IR增长的影响。此外，IR增长和容量退化是准确估算SOH 同样重要的因素[10]。容量退化代表电池老化，表明何时需要更换电池，而IR增长预示着电池的故障，故两者都不可忽视。基于此，本文提出了同时考虑容量退化和IR增长的电池SOH估计方法，该方法可在嵌入式系统中直接测量，计算量更少。

## **1 SOH 估计模型**
SOH 估计方法流程图如图1所示。本文使用可直接通过嵌入式系统应用测量的HIs，HIs被输入到一个递归神经网络（Rcurrent Neural Network,RNN），该神经网络估计：①基于容量退化的SOH(SOHc)；②基于IR增长的SOH(SOHr)。为了提高SOH估计精度，需研究分析SOHc与SOHr之间的关系。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211121.png)

### 电池健康指标提取
本文从两个不同的电池数据集中提取HIs，即NASA[11]和BEXEL[12]，从锂电池中提取数据集。这些数据集包括测量的电压、电流、温度、容量和IR。在恒流恒压（CC+CV）曲线下充电和恒流放电期间进行测量。表1列出了两个电池数据集的充放电特性。具体来说，NASA 数据提供了4个电池单元的信息（单元＃5、单元＃6、单元＃7、单元＃8），而BEXEL数据集提供了两个电池单元的相同信息（单元＃7和单元＃13）。这些号码是由NASA和BEXEL分配的单元IDs来识别电池单元。估算SOH需要测量容量和IR数据，但NASA数据集只提供6号和7号单元的IR数据，因此，本文只使用 NASA 数据集中的这些单元。在HIs提取过程中，本文将HIs分为两类：反映容量退化的HIs和反映IR增长的HIs。为了分析这些HIs与相应的输出之间的相关性，本文使用Person相关系数[13]：

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211145.png)


其中，N是观测到的次数，A为HIs，B为容量或IR，μA和μB为A和B的平均值，σA和σB为A和B的标准差。在SOH估计中，容量退化是主要因素，因为它反映了电池健康状况的退化。为降低计算复杂度，放电过程中采用第一电压值代替容量退化。随着电池充放电循环次数的增加，容量和HIc都在下降。此外，HIc与容量退化之间的相关系数如表1所列。

表1 电池数据集及其与IR和容量的相关系数
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211157.png)
从表1中可以看出，使用NASA数据集，HIc与容量退化之间的相关系数大于0.8，对于BEXEL数据集HIc与容量退化之间的相关系数甚至大于0.9，因此，HIc可以反映容量的退化。据此，利用HIC估计基于容量的SOH。  

电池中的IR正常也被用作电池健康状况的指标。为了降低计算复杂度，本文将IR替换为充电过程中第一个电压值（HIR）对应的值。IR和电压都随着电池充放电循环次数的增加而增加，即第一个循环和最后一个循环的HIR分别为3.462V和3.478V。第一个和最后一个循环的IR值分别为0.0418Ω和0.0478Ω。此外，在表1所列的所有数据集中，HIR的相关系数都大于0.9。因此，HIR能够反映IR的增加。据此，本文用它来估计基于内阻的SOH。
### SOH 估计框架
在现有的方法中，SOH估计的训练过程是基于一种反映容量退化或IR增长的单一类型的HI方法。然而，容量退化和IR增长表现出不同的特性，这可能会对电池SOH产生不同的影响。因此，只有同时考虑这两个因素才是合理的。据此，本文提出了一种同时考虑容量和IR的电池SOH估计方法，该方法从收集原始电压和电流数据开始，在初始化特征提取过程之前使用预处理技术，包括数据清理和标准化。数据清理是去除数据中的异常值以防止拟合不足的过程，归一化是将数据缩放到0到1之间的过程。这些技术是离线进行的，且只在训练过程中进行。本文在训练期间进行数据预处理，然后，在推理过程中计算数据预处理的参数。  

对数据进行预处理后，提取HIs特征，然后，将HIs反馈给RNN来估计SOH，即使用长短时记忆（Long Short-Term Memory,LSTM）来估计SOHc和SOHr。此外，本文设定LSTM含50个隐藏单元，然后是一个大小为300的全连接层，退出概率为0.5，训练周期设定为500。本文采用均方误差作为损失函数，并用Adam优化器作为优化算法。这些LSTM参数通过对训练数据使用交叉验证仔细地调整和确定。此外，在获取SOH估计模型时，使用一个电池单元的数据（如BEXEL #7：492测量数据）作为训练集，使用另一个电池单元数据集（BEXEL #13：438测量数据）作为测试集。这个过程执行了4次，可得到4个测试结果。  

本文将SOHc定义为电池初始容量与其额定容量的比值[14]。对于新电池，SOHc为100%，当电池容量下降到标称容量的80％时，SOHc为0%。SOHc可表示为：
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211226.png)


式中，Cint为电池容量的初始值；Ck为当前周期k的容量；SOHr为电池IR增加量与初始IR的比值[14]。其可表示为：

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211239.png)

其中，IRk为当前周期k时的IR，IRint为新电池的IR，IREOL为寿命结束时的IR值，假定的寿命结束阈值是标称IR的1.33倍[10]。  

具体来说，本文将估算的SOH作为一个变量，包含SOHc和SOHr两个组成部分。假设SOHc和SOHr对SOH都有显著影响，因此，这两者都不容忽视。本文采用非线性最小二乘法在 MATLAB曲线拟合工具中模拟SOH、SOHc和SOHr之间的关系。实际SOH 采用二阶多项式曲面函数f(X,Y)建模，其表达式为：  

f(X,Y)=c1+c2X+c3Y-c4X2-c5Y2+c6XY    (4)  

其中，X为SOHc，Y为SOHr，cn(n=1,…,6）为模型系数。


## **2 实验验证**

### 实验设置

本文提出的SOH估计方法是通过一个概念证明实验装置来评估的，实验装置如图2所示。它包括一个电池管理系统（BMS）与LTC6803[15]、Linduino Uno 微控制器板、一台计算机和 BEXEL 电池组[12]。采用BMS LTC6803板分别测量充放电过程中的第一个电压值HIc和HIR，然后Linduino Uno微控制器将 HIc和HIR传输到计算机。采用的计算机CPU为Intel i5-6600 CPU。本文在Simulink上创建了一个函数，其中包含模型权重，以及来自训练过的LSTM的偏差。然后进行了两种场景的比较实验：仅考虑容量退化或仅考虑IR增长的SOH估计以及同时考虑容量退化和IR增长的SOH估计。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211306.png)

### 只考虑容量或IR的SOH估计结果

SOHc和SOHr的估算分别基于容量的增加和IR的增加。如图3(a)所示，SOHc可以反映第1~200次充电周期的SOH。经过200个周期后，估算的SOHc与实际SOH相差很大。此外，估计的SOHr与实际的SOH非常相似。SOH的估计值与实际值之间的差距表明了容量和IR对实际SOH的不同影响。这一结果表明，仅考虑容量退化或IR增长的SOH估计方法不能有效反映实际的SOH。
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211334.png)

### 考虑容量和IR的SOH估计结果

如图4(a)所示，估算的SOHc和SOHr与实际SOH有直接关系。最佳拟合曲线结果如图4(b)所示。通过图3(a)和图3(b)的结果可以看出，当同时考虑容量退化和IR增长时，SOH的估计更为准确。表2列出了使用本文所提方法单独SOHr和单独SOHc得到的估计误差。在估算SOH时，SOHr只考虑IR增长，而SOHc只考虑容量下降。本文定义了实际SOH和估计SOH之间的估计误差为均方根误差RMSE，并规定了实际SOH和预测SOH的范围为0~1。因此，SOH估计的RMSE为0.041和0.092分别代表4.1％和9.2％的估计误差。除了RMSE外，表2还列出了使用所提出的方法对单独SOHr和单独SOHc的SOH估计精度的改进效果。从表2中可以看出，在BEXEL和NASA数据集上，所提方法的SOH 估计精度分别提高了82.43％和76.57%。结果表明，该模型的性能明显优于其他基于单类型HIs的模型。

![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211355.png)
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250514211415.png)


