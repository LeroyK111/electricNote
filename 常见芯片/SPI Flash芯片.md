![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250225094802.png)![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250225094816.png)

SPI接口非常常见，下面尽量用通俗的语言介绍什么是SPI接口。

SPI（Serial Peripheral Interface）接口，中文叫串行外设接口，是一种很常用的高速、全双工、同步的通信总线。  
  
打个比方，可以把SPI接口想象成一条用来在电子设备里传递信息的“高速公路”，在这条公路上跑的是数据“汽车”。

  

一、SPI接口的组成

  
SPI接口一般有4条线：  
  
1. 时钟线（SCK）：就像一个指挥家，控制着数据传输的节奏，告诉设备什么时候该发送数据，什么时候该接收数据。  
  
2. 主出从入线（MOSI）：如果你的设备是“领导”（主设备），要给其他设备（从设备）发数据，就通过这条线把数据发出去。  
  
3. 主入从出线（MISO）：反过来，当从设备要给主设备反馈数据时，就通过这条线把数据传回来。  
  
4. 从设备选择线（SS或CS）：主设备通过这条线来选择要和哪个从设备进行通信，就像点名一样，点到哪个从设备，哪个从设备才开始工作。

  

二、SPI接口协议  
  
SPI协议是基于主从架构的通信协议。在一个SPI系统中，必须有一个主设备，并且可以连接多个从设备。  
  
1、数据传输模式：SPI支持全双工数据传输，即在同一时刻，主设备可以向从设备发送数据，同时从设备也可以向主设备发送数据。这种高效的传输方式大大提高了数据交换的速度。  
  
2、时钟极性（CPOL）和时钟相位（CPHA）：  
  
时钟极性（CPOL）决定了时钟信号在空闲状态时的电平是高还是低。当CPOL = 0时，时钟信号在空闲状态为低电平；当CPOL = 1时，时钟信号在空闲状态为高电平。  
  
时钟相位（CPHA）决定了数据采样是在时钟的第一个边沿还是第二个边沿。当CPHA = 0时，数据在时钟的第一个边沿采样；当CPHA = 1时，数据在时钟的第二个边沿采样。  
  
通过CPOL和CPHA的不同组合，SPI协议定义了4种不同的工作模式，以适应不同设备的需求。  
  
3、数据传输格式：SPI协议中，数据以字节为单位进行传输。主设备和从设备在进行数据传输前，需要约定好数据的位数（一般为8位）和传输的顺序（高位在前还是低位在前）。在时钟信号的驱动下，数据一位一位地在MOSI和MISO线上进行传输。
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250225094940.png)
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250225095020.png)
三、信号时序

1、当主设备想要和某个从设备通信时，先把对应的从设备选择线（SS或CS）拉低，选中这个从设备。  
  
2、然后主设备开始在时钟线（SCK）上发出时钟脉冲信号。数据的传输是伴随着时钟脉冲进行的，在每个时钟脉冲的上升沿或者下降沿（具体取决于设置的模式），主设备通过MOSI线发送一位数据，同时从设备也会在这个时刻准备接收数据；同样，从设备会通过MISO线发送一位数据给主设备，主设备也在对应的时刻接收。  
  
3、就这样，一位一位地传输，直到把要传输的数据都传完。传完之后，主设备把从设备选择线（SS或CS）拉高，代表这次通信结束，从设备又回到等待“点名”的状态。
![](https://raw.githubusercontent.com/LeroyK111/pictureBed/master/20250225095040.png)

四、SPI接口的应用  
  
SPI接口在电子设备中有着广泛的应用。

例如，在传感器领域，许多加速度计、陀螺仪等传感器都采用SPI接口与微控制器进行通信，以便将采集到的数据快速准确地传输给微控制器进行处理。

在存储器方面，一些闪存芯片也使用SPI接口与主设备进行数据交互，实现数据的存储和读取操作。本文开头就是从闪存芯片引申出什么是SPI接口。


